# å·¥ä½œæµåŠŸèƒ½è¡¥å……è§„åˆ’

## ä¸€ã€ç³»ç»Ÿæ¶æ„

### 1.1 èœå•ç»“æ„è®¾è®¡

*å¾…åŠä¸­å¿ƒæ¨¡å—**ï¼ˆå·¦ä¾§èœå•ï¼‰ï¼š
```
å¾…åŠä¸­å¿ƒ
â”œâ”€â”€ æˆ‘çš„å¾…åŠ      /tasks/pending
â”œâ”€â”€ å·²åŠä»»åŠ¡      /tasks/completed
â”œâ”€â”€ â”€â”€ åˆ†éš”çº¿ â”€â”€
â”œâ”€â”€ æµç¨‹åç§°A     åŠ¨æ€åŠ è½½ï¼Œç‚¹å‡»æ˜¾ç¤ºè¯¥æµç¨‹çš„æ‰€æœ‰å®ä¾‹
â”œâ”€â”€ æµç¨‹åç§°B     åŠ¨æ€åŠ è½½ï¼Œç‚¹å‡»æ˜¾ç¤ºè¯¥æµç¨‹çš„æ‰€æœ‰å®ä¾‹  
â””â”€â”€ æµç¨‹åç§°C     åŠ¨æ€åŠ è½½ï¼Œç‚¹å‡»æ˜¾ç¤ºè¯¥æµç¨‹çš„æ‰€æœ‰å®ä¾‹
```

**è¯´æ˜**ï¼š
- å·¦ä¾§èœå•åŠ¨æ€åŠ è½½æ‰€æœ‰å·¥ä½œæµ
- ç‚¹å‡»å·¥ä½œæµåç§°åï¼Œå³ä¾§æ˜¾ç¤ºè¯¥æµç¨‹çš„æ‰€æœ‰å®ä¾‹
- å®ä¾‹åˆ—è¡¨é¡µé¢æä¾›"åˆ›å»ºå®ä¾‹"æŒ‰é’®ï¼Œå¯ç›´æ¥å¯åŠ¨æ–°æµç¨‹

**æµç¨‹ç®¡ç†æ¨¡å—**ï¼ˆç‹¬ç«‹èœå•ï¼‰ï¼š
```
æµç¨‹ç®¡ç†         /workflows
```

### 1.2 é¡µé¢å…³ç³»å›¾

```
æµç¨‹ç®¡ç†é¡µ (/workflows)
    â”œâ”€â”€ ç‚¹å‡»"å¯åŠ¨" â†’ å¯åŠ¨è¡¨å•å¯¹è¯æ¡†
    â”‚                   â†“
    â”‚              åˆ›å»ºæµç¨‹å®ä¾‹
    â”‚                   â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ åˆ·æ–°å¯¹åº”å·¥ä½œæµçš„å®ä¾‹åˆ—è¡¨ â†â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚
å¾…åŠä¸­å¿ƒ - å·¦ä¾§èœå•                                  â”‚
    â”œâ”€â”€ æˆ‘çš„å¾…åŠ                                    â”‚
    â”œâ”€â”€ å·²åŠä»»åŠ¡                                    â”‚
    â”œâ”€â”€ â”€â”€ åˆ†éš”çº¿ â”€â”€                               â”‚
    â”œâ”€â”€ å·¥ä½œæµA â†’ å³ä¾§æ˜¾ç¤ºè¯¥æµç¨‹çš„æ‰€æœ‰å®ä¾‹           â”‚
    â”‚              â”œâ”€â”€ åˆ›å»ºå®ä¾‹æŒ‰é’® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚              â”œâ”€â”€ æŸ¥çœ‹è¯¦æƒ…
    â”‚              â”œâ”€â”€ æŸ¥çœ‹è¿›åº¦
    â”‚              â””â”€â”€ ç»ˆæ­¢æµç¨‹
    â”‚
    â””â”€â”€ ç‚¹å‡»ä»»åŠ¡ â†’ ä»»åŠ¡è¯¦æƒ…é¡µ (/tasks/:id)
                        â†“
                   å®Œæˆ/æ‹’ç»æ“ä½œ
                        â†“
                   æµç¨‹å®ä¾‹çŠ¶æ€æ›´æ–°
```

## äºŒã€æ ¸å¿ƒåŠŸèƒ½æ¸…å•

### P0 æ ¸å¿ƒåŠŸèƒ½ï¼ˆç«‹å³å®æ–½ï¼‰

#### 2.1 æµç¨‹å¯åŠ¨åŠŸèƒ½
**ä½ç½®**ï¼šæµç¨‹ç®¡ç†é¡µ (`/workflows`)

**åŠŸèƒ½ç‚¹**ï¼š
- åœ¨æµç¨‹åˆ—è¡¨çš„æ“ä½œåˆ—æ·»åŠ "å¯åŠ¨"æŒ‰é’®
- ç‚¹å‡»å¼¹å‡ºå¯åŠ¨è¡¨å•å¯¹è¯æ¡†
- æ”¶é›†å¯åŠ¨å‚æ•°ï¼ˆæµç¨‹å˜é‡ã€æ ‡é¢˜ç­‰ï¼‰
- è°ƒç”¨ `POST /api/workflows/:id/start` åˆ›å»ºæµç¨‹å®ä¾‹
- å¯åŠ¨æˆåŠŸåæç¤ºç”¨æˆ·ï¼Œå¹¶å¯è·³è½¬åˆ°æµç¨‹å®ä¾‹åˆ—è¡¨

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// WorkflowPage.tsx
const handleStart = async (workflowId: string) => {
  const values = await startForm.validateFields();
  const response = await fetch(`/api/workflows/${workflowId}/start`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(values),
  });
  
  if (response.ok) {
    message.success('æµç¨‹å¯åŠ¨æˆåŠŸ');
    // å¯é€‰ï¼šè·³è½¬åˆ°æµç¨‹å®ä¾‹åˆ—è¡¨
    navigate('/tasks/instances');
  }
};
```

**åç«¯æ¥å£**ï¼š
```typescript
// workflow.controller.ts
@Post(':id/start')
async startWorkflow(
  @Param('id') workflowId: string,
  @Body() startData: StartWorkflowDto,
) {
  return this.workflowService.startWorkflow(workflowId, startData);
}
```

---

### 2.2 æµç¨‹å®ä¾‹åˆ—è¡¨é¡µï¼ˆæŒ‰å·¥ä½œæµåˆ†ç±»ï¼‰
**ä½ç½®**ï¼šå¾…åŠä¸­å¿ƒå·¦ä¾§èœå• â†’ ç‚¹å‡»å·¥ä½œæµåç§°

**åŠŸèƒ½ç‚¹**ï¼š
- å·¦ä¾§èœå•åŠ¨æ€åŠ è½½æ‰€æœ‰å·¥ä½œæµåˆ—è¡¨
- ç‚¹å‡»å·¥ä½œæµåç§°åï¼Œå³ä¾§æ˜¾ç¤ºè¯¥æµç¨‹çš„æ‰€æœ‰å®ä¾‹
- é¡µé¢æ ‡é¢˜æ˜¾ç¤ºå½“å‰å·¥ä½œæµåç§°
- æä¾›"åˆ›å»ºå®ä¾‹"æŒ‰é’®ï¼Œç‚¹å‡»å¼¹å‡ºå¯åŠ¨è¡¨å•
- åˆ—è¡¨å­—æ®µï¼š
  - æµç¨‹åç§°ï¼ˆå¦‚æœæ˜¯ä»ç‰¹å®šå·¥ä½œæµè¿›å…¥åˆ™ä¸æ˜¾ç¤ºç­›é€‰å™¨ï¼‰
  - å®ä¾‹ID
  - å½“å‰èŠ‚ç‚¹
  - çŠ¶æ€ï¼ˆè¿è¡Œä¸­/å·²å®Œæˆ/å·²ç»ˆæ­¢ï¼‰
  - å¯åŠ¨äºº
  - å¯åŠ¨æ—¶é—´
  - å®Œæˆæ—¶é—´
- ç­›é€‰åŠŸèƒ½ï¼š
  - æŒ‰çŠ¶æ€ç­›é€‰
  - ï¼ˆä»…åœ¨æŸ¥çœ‹æ‰€æœ‰å®ä¾‹æ—¶ï¼‰æŒ‰æµç¨‹åç§°ç­›é€‰
- æ“ä½œæŒ‰é’®ï¼š
  - æŸ¥çœ‹è¯¦æƒ…
  - æŸ¥çœ‹æµç¨‹å›¾ï¼ˆé«˜äº®å½“å‰èŠ‚ç‚¹ï¼‰
  - ç»ˆæ­¢æµç¨‹ï¼ˆè¿è¡Œä¸­çŠ¶æ€ï¼‰

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// App.tsx - å¾…åŠä¸­å¿ƒéƒ¨åˆ†
const [todoSubPage, setTodoSubPage] = useState<'pending' | 'completed' | 'workflow'>('pending');
const [selectedWorkflowId, setSelectedWorkflowId] = useState<string | null>(null);
const [workflows, setWorkflows] = useState<Array<{ id: string; name: string }>>([]);

// åŠ è½½å·¥ä½œæµåˆ—è¡¨
React.useEffect(() => {
  if (activePage === 'todo') {
    fetch('/api/workflows?tenantId=tenant-1')
      .then(res => res.json())
      .then(data => {
        if (data.success) {
          setWorkflows(data.data || []);
        }
      });
  }
}, [activePage]);

// å·¦ä¾§èœå•æ¸²æŸ“
<div style={{ width: 220, background: '#fff', overflowY: 'auto' }}>
  <div>æˆ‘çš„å¾…åŠ</div>
  <div>å·²åŠä»»åŠ¡</div>
  <div>æµç¨‹åˆ—è¡¨</div>
  {workflows.map(workflow => (
    <div
      key={workflow.id}
      onClick={() => {
        setTodoSubPage('workflow');
        setSelectedWorkflowId(workflow.id);
      }}
    >
      ğŸ“‹ {workflow.name}
    </div>
  ))}
</div>

// å³ä¾§å†…å®¹åŒºåŸŸ
{todoSubPage === 'workflow' && selectedWorkflowId && (
  <WorkflowInstanceList 
    workflowId={selectedWorkflowId}
    onViewDetail={(instanceId) => { /* ... */ }}
  />
)}
```

```typescript
// WorkflowInstanceList.tsx
interface WorkflowInstanceListProps {
  workflowId?: string; // å¯é€‰ï¼Œå¦‚æœä¼ å…¥åˆ™åªæ˜¾ç¤ºè¯¥å·¥ä½œæµçš„å®ä¾‹
  onViewDetail?: (instanceId: string) => void;
  onViewDiagram?: (instanceId: string) => void;
}

export const WorkflowInstanceList: React.FC<WorkflowInstanceListProps> = ({
  workflowId: propWorkflowId,
  onViewDetail,
  onViewDiagram,
}) => {
  const [startModalVisible, setStartModalVisible] = useState(false);
  const [startForm] = Form.useForm();
  const [currentWorkflow, setCurrentWorkflow] = useState<any>(null);
  
  // å¯åŠ¨æµç¨‹
  const handleStartWorkflow = async () => {
    const values = await startForm.validateFields();
    const response = await fetch(`/api/workflows/${propWorkflowId}/start`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        title: values.title,
        variables: {},
        initiator: 'user-1',
      }),
    });
    
    if (response.ok) {
      message.success('æµç¨‹å¯åŠ¨æˆåŠŸ');
      setStartModalVisible(false);
      fetchInstances(); // åˆ·æ–°å®ä¾‹åˆ—è¡¨
    }
  };

  return (
    <Card
      title={propWorkflowId && currentWorkflow ? currentWorkflow.name : 'æµç¨‹å®ä¾‹'}
      extra={
        <Space>
          {propWorkflowId && (
            <Button type="primary" onClick={() => setStartModalVisible(true)}>
              åˆ›å»ºå®ä¾‹
            </Button>
          )}
          <Button onClick={fetchInstances}>åˆ·æ–°</Button>
        </Space>
      }
    >
      {/* åªåœ¨æœ‰ workflowId æ—¶æ˜¾ç¤ºçŠ¶æ€ç­›é€‰ï¼Œå¦åˆ™æ˜¾ç¤ºå®Œæ•´ç­›é€‰å™¨ */}
      <Table columns={columns} dataSource={instances} />
      
      {/* å¯åŠ¨æµç¨‹æ¨¡æ€æ¡† */}
      <Modal
        open={startModalVisible}
        onOk={handleStartWorkflow}
        onCancel={() => setStartModalVisible(false)}
      >
        <Form form={startForm}>
          <Form.Item name="title" label="å®ä¾‹æ ‡é¢˜" rules={[{ required: true }]}>
            <Input />
          </Form.Item>
        </Form>
      </Modal>
    </Card>
  );
};
```

**åç«¯æ¥å£**ï¼š
```typescript
// workflow.controller.ts
@Get('instances')
async getInstances(
  @Query() filters: InstanceFilterDto,
) {
  return this.workflowService.getInstances(filters);
}

@Post(':id/start')
async startWorkflow(
  @Param('id') workflowId: string,
  @Body() body: { 
    title?: string;
    description?: string;
    variables?: Record<string, any>; 
    initiator?: string; 
    tenantId?: string 
  },
) {
  const tenantId = body.tenantId || 'tenant-1';
  const initiator = body.initiator || 'user-1';
  const variables = body.variables || {};

  const instance = await this.workflowExecutor.startWorkflow(
    workflowId,
    variables,
    initiator,
    tenantId,
  );

  return { success: true, data: instance };
}

@Post('instances/:id/terminate')
async terminateInstance(@Param('id') instanceId: string) {
  await this.prisma.workflowInstance.update({
    where: { id: instanceId },
    data: {
      status: 'terminated',
      completedAt: new Date(),
    },
  });
  return { success: true, message: 'æµç¨‹å·²ç»ˆæ­¢' };
}
```

```typescript
// task-manager.service.ts
async getInstances(
  tenantId: string,
  options?: {
    status?: string;
    initiator?: string;
    workflowId?: string; // æ”¯æŒæŒ‰å·¥ä½œæµIDç­›é€‰
    pageSize?: number;
    pageNumber?: number;
  },
) {
  const { status, initiator, workflowId, pageSize = 10, pageNumber = 1 } = options || {};

  const where: any = { tenantId };
  if (status) where.status = status;
  if (initiator) where.initiator = initiator;
  if (workflowId) where.workflowId = workflowId;

  const [items, total] = await Promise.all([
    this.prisma.workflowInstance.findMany({
      where,
      include: {
        workflow: {
          select: { name: true, description: true },
        },
      },
      orderBy: { createdAt: 'desc' },
      skip: (pageNumber - 1) * pageSize,
      take: pageSize,
    }),
    this.prisma.workflowInstance.count({ where }),
  ]);

  return {
    items: items.map((instance) => ({
      id: instance.id,
      workflowId: instance.workflowId,
      workflow: {
        name: instance.workflow.name,
        description: instance.workflow.description,
      },
      currentNode: JSON.parse(instance.currentNodeIds)[0] || '-',
      status: instance.status,
      initiator: instance.initiator,
      createdAt: instance.createdAt,
      completedAt: instance.completedAt,
    })),
    total,
    page: pageNumber,
    pageSize,
  };
}
```

---

#### 2.3 å¾…åŠä»»åŠ¡å®Œæˆ/æ‹’ç»æ“ä½œ
**ä½ç½®**ï¼šä»»åŠ¡è¯¦æƒ…é¡µ (`/tasks/:id`)

**åŠŸèƒ½ç‚¹**ï¼š
- æ˜¾ç¤ºä»»åŠ¡åŸºæœ¬ä¿¡æ¯ï¼ˆä»»åŠ¡åç§°ã€æ‰€å±æµç¨‹ã€åˆ°æœŸæ—¶é—´ç­‰ï¼‰
- æ˜¾ç¤ºæµç¨‹ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆæµç¨‹å˜é‡ã€å†å²è®°å½•ï¼‰
- å®¡æ‰¹è¡¨å•ï¼ˆæ ¹æ®ä»»åŠ¡é…ç½®åŠ¨æ€ç”Ÿæˆï¼‰
- æ“ä½œæŒ‰é’®ï¼š
  - é€šè¿‡/å®Œæˆï¼ˆç»¿è‰²ï¼‰
  - æ‹’ç»/é©³å›ï¼ˆçº¢è‰²ï¼‰
  - è½¬åŠï¼ˆç°è‰²ï¼‰
  - ä¿å­˜è‰ç¨¿ï¼ˆç°è‰²ï¼‰
- å¿…å¡«å®¡æ‰¹æ„è§
- æ“ä½œæˆåŠŸåè¿”å›å¾…åŠåˆ—è¡¨

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// TaskDetail.tsx
export const TaskDetail = () => {
  const { taskId } = useParams();
  const [task, setTask] = useState<any>(null);
  const [form] = Form.useForm();

  const handleComplete = async (action: 'approve' | 'reject') => {
    const values = await form.validateFields();
    
    const response = await fetch(`/api/tasks/${taskId}/complete`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        action,
        formData: values.formData,
        comment: values.comment,
      }),
    });

    if (response.ok) {
      message.success(action === 'approve' ? 'å®¡æ‰¹é€šè¿‡' : 'å·²é©³å›');
      navigate('/tasks/pending');
    }
  };

  return (
    <Card title={`ä»»åŠ¡ï¼š${task?.nodeName}`}>
      <Descriptions>
        <Descriptions.Item label="æ‰€å±æµç¨‹">{task?.workflowName}</Descriptions.Item>
        <Descriptions.Item label="æµç¨‹å®ä¾‹">{task?.instanceTitle}</Descriptions.Item>
        <Descriptions.Item label="åˆ°æœŸæ—¶é—´">{task?.dueDate}</Descriptions.Item>
      </Descriptions>

      <Divider>å®¡æ‰¹è¡¨å•</Divider>
      <Form form={form}>
        {/* åŠ¨æ€è¡¨å•å­—æ®µ */}
        <Form.Item name="comment" label="å®¡æ‰¹æ„è§" rules={[{ required: true }]}>
          <Input.TextArea rows={4} />
        </Form.Item>
      </Form>

      <Space>
        <Button type="primary" onClick={() => handleComplete('approve')}>é€šè¿‡</Button>
        <Button danger onClick={() => handleComplete('reject')}>æ‹’ç»</Button>
        <Button>è½¬åŠ</Button>
        <Button>ä¿å­˜è‰ç¨¿</Button>
      </Space>
    </Card>
  );
};
```

**åç«¯æ¥å£**ï¼š
```typescript
// task.controller.ts
@Post(':id/complete')
async completeTask(
  @Param('id') taskId: string,
  @Body() completeData: CompleteTaskDto,
) {
  return this.taskService.completeTask(taskId, completeData);
}

// task.service.ts
async completeTask(taskId: string, data: CompleteTaskDto) {
  // 1. æ›´æ–°ä»»åŠ¡çŠ¶æ€
  const task = await this.prisma.taskInstance.update({
    where: { id: taskId },
    data: {
      status: data.action === 'approve' ? 'completed' : 'rejected',
      completedAt: new Date(),
      completedBy: data.userId,
      comment: data.comment,
      formData: JSON.stringify(data.formData),
    },
  });

  // 2. é€šçŸ¥å·¥ä½œæµå¼•æ“ç»§ç»­æ‰§è¡Œ
  await this.workflowExecutor.continueExecution(task.instanceId, {
    taskId,
    action: data.action,
    formData: data.formData,
  });

  return { success: true };
}
```

---

### P1 é‡è¦åŠŸèƒ½ï¼ˆè¿‘æœŸå®æ–½ï¼‰

#### 2.4 æµç¨‹å®ä¾‹è¯¦æƒ…å®Œå–„
**ä½ç½®**ï¼šæµç¨‹å®ä¾‹åˆ—è¡¨ â†’ ç‚¹å‡»è¯¦æƒ…

**åŠŸèƒ½ç‚¹**ï¼š
- åŸºæœ¬ä¿¡æ¯å¡ç‰‡ï¼š
  - æµç¨‹åç§°ã€ç‰ˆæœ¬
  - å®ä¾‹æ ‡é¢˜ã€çŠ¶æ€
  - å¯åŠ¨äººã€å¯åŠ¨æ—¶é—´ã€å®Œæˆæ—¶é—´
  - æµç¨‹å˜é‡ï¼ˆè¡¨æ ¼å±•ç¤ºï¼‰
- æµç¨‹è¿›åº¦å¯è§†åŒ–ï¼š
  - æ˜¾ç¤ºæµç¨‹å›¾ï¼ˆåªè¯»æ¨¡å¼ï¼‰
  - é«˜äº®å½“å‰èŠ‚ç‚¹ï¼ˆè“è‰²è¾¹æ¡†ï¼‰
  - å·²å®ŒæˆèŠ‚ç‚¹ï¼ˆç»¿è‰²å¡«å……ï¼‰
  - å¾…æ‰§è¡ŒèŠ‚ç‚¹ï¼ˆç°è‰²å¡«å……ï¼‰
- å†å²è®°å½•æ—¶é—´è½´ï¼š
  - èŠ‚ç‚¹åç§°
  - å¤„ç†äºº
  - å¤„ç†æ—¶é—´
  - å®¡æ‰¹æ„è§
  - è¡¨å•æ•°æ®

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// WorkflowInstanceDetail.tsx
export const WorkflowInstanceDetail = () => {
  const { instanceId } = useParams();
  const [instance, setInstance] = useState<any>(null);
  const [history, setHistory] = useState<any[]>([]);

  return (
    <div>
      <Card title="åŸºæœ¬ä¿¡æ¯">
        <Descriptions>
          <Descriptions.Item label="æµç¨‹åç§°">{instance?.workflowName}</Descriptions.Item>
          <Descriptions.Item label="å®ä¾‹æ ‡é¢˜">{instance?.title}</Descriptions.Item>
          <Descriptions.Item label="çŠ¶æ€">
            <Tag color={statusColors[instance?.status]}>{statusLabels[instance?.status]}</Tag>
          </Descriptions.Item>
        </Descriptions>
      </Card>

      <Card title="æµç¨‹è¿›åº¦">
        <ReactFlow
          nodes={instance?.nodes}
          edges={instance?.edges}
          nodeTypes={nodeTypes}
          fitView
          readOnly
        />
      </Card>

      <Card title="å†å²è®°å½•">
        <Timeline>
          {history.map(item => (
            <Timeline.Item key={item.id} color={item.status === 'completed' ? 'green' : 'gray'}>
              <p><strong>{item.nodeName}</strong></p>
              <p>å¤„ç†äººï¼š{item.completedBy} | æ—¶é—´ï¼š{formatDate(item.completedAt)}</p>
              <p>æ„è§ï¼š{item.comment}</p>
            </Timeline.Item>
          ))}
        </Timeline>
      </Card>
    </div>
  );
};
```

---

#### 2.5 ç®€å•è¡¨å•é…ç½®
**ä½ç½®**ï¼šæµç¨‹è®¾è®¡å™¨ â†’ UserTask èŠ‚ç‚¹é…ç½®

**åŠŸèƒ½ç‚¹**ï¼š
- åœ¨ UserTask èŠ‚ç‚¹é…ç½®é¢æ¿æ·»åŠ "è¡¨å•é…ç½®"æ ‡ç­¾é¡µ
- æ”¯æŒæ·»åŠ è¡¨å•å­—æ®µï¼š
  - å­—æ®µåç§°
  - å­—æ®µç±»å‹ï¼ˆæ–‡æœ¬ã€æ•°å­—ã€æ—¥æœŸã€ä¸‹æ‹‰ã€å¤šé€‰ï¼‰
  - æ˜¯å¦å¿…å¡«
  - é»˜è®¤å€¼
  - æç¤ºæ–‡æœ¬
- è¡¨å•å­—æ®µå¯æ’åºã€ç¼–è¾‘ã€åˆ é™¤
- ä¿å­˜åä¸æµç¨‹å®šä¹‰ä¸€èµ·å­˜å‚¨

**æ•°æ®ç»“æ„**ï¼š
```typescript
interface UserTaskConfig {
  formFields?: FormField[];
}

interface FormField {
  key: string;
  label: string;
  type: 'text' | 'number' | 'date' | 'select' | 'multiSelect' | 'textarea';
  required?: boolean;
  defaultValue?: any;
  placeholder?: string;
  options?: { label: string; value: any }[]; // ä¸‹æ‹‰/å¤šé€‰
}
```

---

#### 2.6 æµç¨‹å˜é‡åŸºæœ¬ç®¡ç†
**åŠŸèƒ½ç‚¹**ï¼š
- å¯åŠ¨æµç¨‹æ—¶è®¾ç½®åˆå§‹å˜é‡ï¼ˆé”®å€¼å¯¹å½¢å¼ï¼‰
- ä»»åŠ¡å®Œæˆæ—¶æ›´æ–°å˜é‡ï¼ˆè¡¨å•æ•°æ®è‡ªåŠ¨åˆå¹¶åˆ°å˜é‡ï¼‰
- æµç¨‹å®ä¾‹è¯¦æƒ…é¡µæ˜¾ç¤ºå½“å‰æ‰€æœ‰å˜é‡
- å˜é‡åœ¨æ¡ä»¶åˆ†æ”¯ä¸­ä½¿ç”¨ï¼ˆè¡¨è¾¾å¼æ±‚å€¼ï¼‰

**æ•°æ®å­˜å‚¨**ï¼š
```prisma
model WorkflowInstance {
  id        String   @id @default(uuid())
  variables Json?    // å­˜å‚¨æµç¨‹å˜é‡ { key: value }
  // ...
}

model TaskInstance {
  id       String   @id @default(uuid())
  formData Json?    // å­˜å‚¨è¡¨å•æ•°æ®
  // ...
}
```

---

### P2 å¢å¼ºåŠŸèƒ½ï¼ˆåç»­å®æ–½ï¼‰

#### 2.7 å¤æ‚è¡¨å•é…ç½®
- è¡¨å•å­—æ®µå…³è”æ•°æ®æ¨¡å‹ï¼ˆä¸‹æ‹‰é€‰é¡¹ä»æ•°æ®åº“åŠ è½½ï¼‰
- å­—æ®µè”åŠ¨ï¼ˆå­—æ®µAçš„å€¼å½±å“å­—æ®µBçš„å¯è§æ€§/é€‰é¡¹ï¼‰
- è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ã€è‡ªå®šä¹‰å‡½æ•°ï¼‰
- è¡¨å•å¸ƒå±€é…ç½®ï¼ˆåˆ†ç»„ã€åˆ†åˆ—ï¼‰

#### 2.8 æ¡ä»¶åˆ†æ”¯å¯è§†åŒ–é…ç½®
- Gateway èŠ‚ç‚¹é…ç½®æ¡ä»¶è¡¨è¾¾å¼
- è¡¨è¾¾å¼ç¼–è¾‘å™¨ï¼ˆæ”¯æŒå˜é‡ã€è¿ç®—ç¬¦ã€å‡½æ•°ï¼‰
- æ¡ä»¶æµ‹è¯•å·¥å…·ï¼ˆè¾“å…¥å˜é‡å€¼ï¼ŒæŸ¥çœ‹èµ°å“ªæ¡åˆ†æ”¯ï¼‰

#### 2.9 æµç¨‹è½¬åŠã€åŠ ç­¾ç­‰é«˜çº§åŠŸèƒ½
- è½¬åŠï¼šå°†ä»»åŠ¡è½¬ç»™å…¶ä»–äººå¤„ç†
- åŠ ç­¾ï¼šå¢åŠ é¢å¤–å®¡æ‰¹äºº
- å§”æ´¾ï¼šä¸´æ—¶å§”æ´¾ä»–äººå®¡æ‰¹
- å‚¬åŠï¼šæé†’å¾…åŠäººå°½å¿«å¤„ç†

---

## ä¸‰ã€æ•°æ®æµå›¾

```
æµç¨‹ç®¡ç†é¡µ (/workflows)
    â†“ ç‚¹å‡»"å¯åŠ¨"
å¡«å†™å¯åŠ¨è¡¨å•
    â†“ æäº¤
åˆ›å»ºæµç¨‹å®ä¾‹ (WorkflowInstance)
    â†“
æµç¨‹å¼•æ“å¼€å§‹æ‰§è¡Œ
    â†“
é‡åˆ° UserTask èŠ‚ç‚¹ â†’ åˆ›å»ºå¾…åŠä»»åŠ¡ (TaskInstance)
    â†“
å¾…åŠä¸­å¿ƒ (/tasks/pending) æ˜¾ç¤ºä»»åŠ¡
    â†“ ç‚¹å‡»ä»»åŠ¡
ä»»åŠ¡è¯¦æƒ…é¡µ (/tasks/:id)
    â†“ å¡«å†™è¡¨å•å¹¶å®Œæˆ
æ›´æ–°ä»»åŠ¡çŠ¶æ€ (TaskInstance.status = completed)
    â†“
æµç¨‹å¼•æ“ç»§ç»­æ‰§è¡Œ
    â†“
æ›´æ–°æµç¨‹å®ä¾‹çŠ¶æ€å’Œå½“å‰èŠ‚ç‚¹
    â†“
æµç¨‹å®ä¾‹åˆ—è¡¨ (/tasks/instances) å®æ—¶æ›´æ–°
```

---

## å››ã€è·¯ç”±é…ç½®

```typescript
// App.tsx æˆ–è·¯ç”±é…ç½®æ–‡ä»¶
const routes = [
  {
    path: '/workflows',
    component: WorkflowPage,
    title: 'æµç¨‹ç®¡ç†',
  },
  {
    path: '/tasks',
    component: TaskLayout, // å¸¦å·¦ä¾§èœå•çš„å¸ƒå±€
    children: [
      { path: 'pending', component: PendingTaskPage, title: 'æˆ‘çš„å¾…åŠ' },
      { path: 'completed', component: CompletedTaskPage, title: 'å·²åŠä»»åŠ¡' },
      { path: 'instances', component: WorkflowInstanceListPage, title: 'æµç¨‹å®ä¾‹' },
      { path: ':id', component: TaskDetail, title: 'ä»»åŠ¡è¯¦æƒ…' },
    ],
  },
];
```

---

## äº”ã€å®æ–½æ­¥éª¤

### é˜¶æ®µä¸€ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆ1-2å¤©ï¼‰
1. âœ… åˆ›å»ºæµç¨‹å®ä¾‹åˆ—è¡¨é¡µç»„ä»¶
2. âœ… åœ¨å¾…åŠä¸­å¿ƒæ·»åŠ å·¦ä¾§èœå•ï¼ˆæˆ‘çš„å¾…åŠã€å·²åŠä»»åŠ¡ã€æµç¨‹å®ä¾‹ï¼‰
3. âœ… å®ç°æµç¨‹å¯åŠ¨åŠŸèƒ½ï¼ˆå‰ç«¯+åç«¯ï¼‰
4. âœ… å®Œå–„ä»»åŠ¡è¯¦æƒ…é¡µï¼ˆæ·»åŠ å®Œæˆ/æ‹’ç»æŒ‰é’®ï¼‰
5. âœ… å®ç°ä»»åŠ¡å®Œæˆæ¥å£ï¼ˆåç«¯ï¼‰
6. âœ… æµ‹è¯•å®Œæ•´æµç¨‹ï¼šå¯åŠ¨ â†’ å¾…åŠ â†’ å®Œæˆ â†’ å®ä¾‹æ›´æ–°

### é˜¶æ®µäºŒï¼šå¢å¼ºä½“éªŒï¼ˆ1å¤©ï¼‰
1. âœ… å®Œå–„æµç¨‹å®ä¾‹è¯¦æƒ…é¡µ
2. âœ… æ·»åŠ æµç¨‹å›¾é«˜äº®æ˜¾ç¤ºå½“å‰èŠ‚ç‚¹
3. âœ… å®ç°æµç¨‹ç»ˆæ­¢åŠŸèƒ½
4. âœ… æ·»åŠ å†å²è®°å½•æ—¶é—´è½´

### é˜¶æ®µä¸‰ï¼šè¡¨å•ä¸å˜é‡ï¼ˆ1-2å¤©ï¼‰
1. âœ… UserTask èŠ‚ç‚¹æ·»åŠ ç®€å•è¡¨å•é…ç½®
2. âœ… ä»»åŠ¡è¯¦æƒ…é¡µåŠ¨æ€æ¸²æŸ“è¡¨å•
3. âœ… å®ç°æµç¨‹å˜é‡ç®¡ç†
4. âœ… å¯åŠ¨è¡¨å•ä¸ä»»åŠ¡è¡¨å•é›†æˆå˜é‡

### é˜¶æ®µå››ï¼šé«˜çº§åŠŸèƒ½ï¼ˆåç»­è¿­ä»£ï¼‰
1. å¤æ‚è¡¨å•é…ç½®
2. æ¡ä»¶åˆ†æ”¯å¯è§†åŒ–
3. è½¬åŠã€åŠ ç­¾ç­‰åŠŸèƒ½

---

## å…­ã€å…³é”®æŠ€æœ¯ç‚¹

### 6.1 å¾…åŠä¸­å¿ƒå·¦ä¾§èœå•åŠ¨æ€åŠ è½½å·¥ä½œæµ

**æ ¸å¿ƒæ€è·¯**ï¼š
- å¾…åŠä¸­å¿ƒé¡µé¢åŠ è½½æ—¶ï¼Œè‡ªåŠ¨è·å–æ‰€æœ‰å·¥ä½œæµåˆ—è¡¨
- å·¦ä¾§èœå•åŠ¨æ€æ¸²æŸ“å·¥ä½œæµåˆ—è¡¨
- ç‚¹å‡»å·¥ä½œæµåï¼Œå³ä¾§æ˜¾ç¤ºè¯¥æµç¨‹çš„æ‰€æœ‰å®ä¾‹
- å®ä¾‹åˆ—è¡¨é¡µé¢æ ¹æ®æ˜¯å¦ä¼ å…¥ `workflowId` å‚æ•°åŠ¨æ€è°ƒæ•´UI

```typescript
// App.tsx
function App() {
  const [activePage, setActivePage] = useState('todo');
  const [todoSubPage, setTodoSubPage] = useState<'pending' | 'completed' | 'workflow'>('pending');
  const [selectedWorkflowId, setSelectedWorkflowId] = useState<string | null>(null);
  const [workflows, setWorkflows] = useState<Array<{ id: string; name: string }>>([]);

  // åŠ è½½å·¥ä½œæµåˆ—è¡¨
  React.useEffect(() => {
    if (activePage === 'todo') {
      fetch('/api/workflows?tenantId=tenant-1')
        .then(res => res.json())
        .then(data => {
          if (data.success) {
            setWorkflows(data.data || []);
          }
        })
        .catch(err => console.error('åŠ è½½å·¥ä½œæµåˆ—è¡¨å¤±è´¥:', err));
    }
  }, [activePage]);

  return (
    <div style={{ display: 'flex', height: '100%' }}>
      {/* å·¦ä¾§èœå• */}
      <div style={{ width: 220, background: '#fff', overflowY: 'auto' }}>
        <div style={{ padding: '16px', fontWeight: 'bold' }}>å¾…åŠä¸­å¿ƒ</div>
        
        {/* å›ºå®šèœå•é¡¹ */}
        <div onClick={() => { setTodoSubPage('pending'); setSelectedWorkflowId(null); }}>
          ğŸ“¥ æˆ‘çš„å¾…åŠ
        </div>
        <div onClick={() => { setTodoSubPage('completed'); setSelectedWorkflowId(null); }}>
          âœ… å·²åŠä»»åŠ¡
        </div>
        
        {/* åˆ†éš”çº¿ */}
        <div style={{ borderTop: '1px solid #f0f0f0', padding: '8px 16px', color: '#999' }}>
          æµç¨‹åˆ—è¡¨
        </div>
        
        {/* åŠ¨æ€å·¥ä½œæµåˆ—è¡¨ */}
        {workflows.map(workflow => (
          <div
            key={workflow.id}
            onClick={() => {
              setTodoSubPage('workflow');
              setSelectedWorkflowId(workflow.id);
            }}
            style={{
              padding: '12px 16px',
              cursor: 'pointer',
              background: todoSubPage === 'workflow' && selectedWorkflowId === workflow.id 
                ? '#e6f7ff' 
                : 'transparent',
            }}
          >
            ğŸ“‹ {workflow.name}
          </div>
        ))}
      </div>
      
      {/* å³ä¾§å†…å®¹åŒºåŸŸ */}
      <div style={{ flex: 1 }}>
        {todoSubPage === 'pending' && <TodoCenter />}
        {todoSubPage === 'completed' && <TodoCenter />}
        {todoSubPage === 'workflow' && selectedWorkflowId && (
          <WorkflowInstanceList 
            workflowId={selectedWorkflowId}
            onViewDetail={(instanceId) => { /* æŸ¥çœ‹è¯¦æƒ… */ }}
            onViewDiagram={(instanceId) => { /* æŸ¥çœ‹æµç¨‹å›¾ */ }}
          />
        )}
      </div>
    </div>
  );
}
```

## 6.2 æµç¨‹å®ä¾‹åˆ—è¡¨é¡µæ”¯æŒå·¥ä½œæµç­›é€‰

**å…³é”®ç‚¹**ï¼š
- ç»„ä»¶æ¥å—å¯é€‰çš„ `workflowId` å‚æ•°
- å¦‚æœä¼ å…¥ `workflowId`ï¼Œåˆ™åªæ˜¾ç¤ºè¯¥å·¥ä½œæµçš„å®ä¾‹ï¼Œå¹¶æ˜¾ç¤º"åˆ›å»ºå®ä¾‹"æŒ‰é’®
- å¦‚æœæœªä¼ å…¥ï¼Œåˆ™æ˜¾ç¤ºæ‰€æœ‰å®ä¾‹ï¼Œå¹¶æä¾›å·¥ä½œæµç­›é€‰å™¨

```typescript
// WorkflowInstanceList.tsx
interface WorkflowInstanceListProps {
  workflowId?: string; // å¯é€‰çš„å·¥ä½œæµID
  onViewDetail?: (instanceId: string) => void;
  onViewDiagram?: (instanceId: string) => void;
}

const WorkflowInstanceList: React.FC<WorkflowInstanceListProps> = ({
  workflowId: propWorkflowId,
  onViewDetail,
  onViewDiagram,
}) => {
  const [loading, setLoading] = useState(false);
  const [instances, setInstances] = useState([]);
  const [startModalVisible, setStartModalVisible] = useState(false);
  const [startForm] = Form.useForm();
  const [currentWorkflow, setCurrentWorkflow] = useState<any>(null);
  
  // ä½¿ç”¨ä¼ å…¥çš„ workflowId æˆ–ç”¨æˆ·é€‰æ‹©çš„
  const effectiveWorkflowId = propWorkflowId || workflowFilter;

  // è·å–æµç¨‹å®ä¾‹
  const fetchInstances = async () => {
    const params = new URLSearchParams({ tenantId: 'tenant-1' });
    if (effectiveWorkflowId) {
      params.append('workflowId', effectiveWorkflowId);
    }
    
    const response = await fetch(`/api/workflows/instances?${params}`);
    const result = await response.json();
    if (result.success) {
      setInstances(result.data.items);
    }
  };

  // å¯åŠ¨æµç¨‹
  const handleStartWorkflow = async () => {
    const values = await startForm.validateFields();
    const response = await fetch(`/api/workflows/${effectiveWorkflowId}/start`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        title: values.title,
        variables: {},
        initiator: 'user-1',
      }),
    });

    if (response.ok) {
      message.success('æµç¨‹å¯åŠ¨æˆåŠŸ');
      setStartModalVisible(false);
      fetchInstances(); // åˆ·æ–°åˆ—è¡¨
    }
  };

  return (
    <Card
      title={propWorkflowId && currentWorkflow ? currentWorkflow.name : 'æµç¨‹å®ä¾‹'}
      extra={
        <Space>
          {/* åªæœ‰æŒ‡å®šå·¥ä½œæµæ—¶æ‰æ˜¾ç¤ºåˆ›å»ºæŒ‰é’® */}
          {propWorkflowId && (
            <Button 
              type="primary" 
              icon={<PlusOutlined />}
              onClick={() => setStartModalVisible(true)}
            >
              åˆ›å»ºå®ä¾‹
            </Button>
          )}
          <Button icon={<ReloadOutlined />} onClick={fetchInstances}>
            åˆ·æ–°
          </Button>
        </Space>
      }
    >
      {/* ç­›é€‰å™¨ - åªåœ¨æ²¡æœ‰ä¼ å…¥ workflowId æ—¶æ˜¾ç¤ºæµç¨‹ç­›é€‰ */}
      {!propWorkflowId && (
        <Select placeholder="é€‰æ‹©æµç¨‹" onChange={setWorkflowFilter}>
          {workflows.map(wf => (
            <Option key={wf.id} value={wf.id}>{wf.name}</Option>
          ))}
        </Select>
      )}
      
      {/* çŠ¶æ€ç­›é€‰ - æ€»æ˜¯æ˜¾ç¤º */}
      <Select placeholder="é€‰æ‹©çŠ¶æ€" onChange={setStatusFilter}>
        <Option value="running">è¿è¡Œä¸­</Option>
        <Option value="completed">å·²å®Œæˆ</Option>
        <Option value="terminated">å·²ç»ˆæ­¢</Option>
      </Select>
      
      <Table columns={columns} dataSource={instances} />
      
      {/* å¯åŠ¨æµç¨‹æ¨¡æ€æ¡† */}
      <Modal
        title={`å¯åŠ¨æµç¨‹ï¼š${currentWorkflow?.name || ''}`}
        open={startModalVisible}
        onOk={handleStartWorkflow}
        onCancel={() => setStartModalVisible(false)}
      >
        <Form form={startForm}>
          <Form.Item 
            name="title" 
            label="å®ä¾‹æ ‡é¢˜" 
            rules={[{ required: true }]}
            initialValue={`${currentWorkflow?.name || ''} - ${new Date().toLocaleDateString()}`}
          >
            <Input />
          </Form.Item>
        </Form>
      </Modal>
    </Card>
  );
};
```

### 6.3 æµç¨‹å®ä¾‹çŠ¶æ€ç®¡ç†

```typescript
// workflow-executor.service.ts
async continueExecution(instanceId: string, taskResult: any) {
  const instance = await this.prisma.workflowInstance.findUnique({
    where: { id: instanceId },
    include: { workflow: true },
  });

  const definition = JSON.parse(instance.workflow.definition);
  const currentNode = definition.nodes.find(n => n.id === instance.currentNode);

  // æ ¹æ®ä»»åŠ¡ç»“æœå’ŒèŠ‚ç‚¹ç±»å‹å†³å®šä¸‹ä¸€æ­¥
  if (taskResult.action === 'reject') {
    // é©³å›é€»è¾‘ï¼šè¿”å›ä¸Šä¸€èŠ‚ç‚¹æˆ–ç»ˆæ­¢æµç¨‹
    await this.handleReject(instance, currentNode);
  } else {
    // é€šè¿‡ï¼šæ‰§è¡Œä¸‹ä¸€èŠ‚ç‚¹
    const nextNodes = this.getNextNodes(definition, currentNode.id);
    await this.executeNextNodes(instance, nextNodes);
  }
}
```

### 6.4 åŠ¨æ€è¡¨å•æ¸²æŸ“

```typescript
// TaskDetail.tsx
const renderFormField = (field: FormField) => {
  switch (field.type) {
    case 'text':
      return (
        <Form.Item name={field.key} label={field.label} rules={[{ required: field.required }]}>
          <Input placeholder={field.placeholder} />
        </Form.Item>
      );
    case 'number':
      return (
        <Form.Item name={field.key} label={field.label} rules={[{ required: field.required }]}>
          <InputNumber placeholder={field.placeholder} style={{ width: '100%' }} />
        </Form.Item>
      );
    case 'date':
      return (
        <Form.Item name={field.key} label={field.label} rules={[{ required: field.required }]}>
          <DatePicker style={{ width: '100%' }} />
        </Form.Item>
      );
    case 'select':
      return (
        <Form.Item name={field.key} label={field.label} rules={[{ required: field.required }]}>
          <Select options={field.options} placeholder={field.placeholder} />
        </Form.Item>
      );
    case 'textarea':
      return (
        <Form.Item name={field.key} label={field.label} rules={[{ required: field.required }]}>
          <Input.TextArea rows={4} placeholder={field.placeholder} />
        </Form.Item>
      );
    default:
      return null;
  }
};
```

---

## ä¸ƒã€éªŒæ”¶æ ‡å‡†

## P0 æ ¸å¿ƒåŠŸèƒ½
- [x] æµç¨‹ç®¡ç†é¡µå¯ä»¥å¯åŠ¨æµç¨‹
- [x] å¯åŠ¨ååœ¨æµç¨‹å®ä¾‹åˆ—è¡¨ä¸­çœ‹åˆ°æ–°å®ä¾‹ï¼ˆçŠ¶æ€ï¼šè¿è¡Œä¸­ï¼‰
- [x] å¾…åŠä¸­å¿ƒå·¦ä¾§èœå•åŠ¨æ€æ˜¾ç¤ºæ‰€æœ‰å·¥ä½œæµ
- [x] ç‚¹å‡»å·¥ä½œæµåç§°æ˜¾ç¤ºè¯¥æµç¨‹çš„æ‰€æœ‰å®ä¾‹
- [x] æµç¨‹å®ä¾‹é¡µé¢æä¾›"åˆ›å»ºå®ä¾‹"æŒ‰é’®ï¼Œå¯ç›´æ¥å¯åŠ¨æ–°æµç¨‹
- [x] å¾…åŠä¸­å¿ƒæ˜¾ç¤ºæ–°åˆ›å»ºçš„å¾…åŠä»»åŠ¡
- [x] å¯ä»¥å®Œæˆå¾…åŠä»»åŠ¡ï¼ˆå¡«å†™æ„è§ï¼‰
- [x] å®Œæˆåæµç¨‹å®ä¾‹çŠ¶æ€æ›´æ–°ï¼Œä»»åŠ¡ä»å¾…åŠç§»åˆ°å·²åŠ
- [x] æµç¨‹å®ä¾‹åˆ—è¡¨å¯ä»¥ç­›é€‰ã€æŸ¥çœ‹è¯¦æƒ…ã€ç»ˆæ­¢æµç¨‹

### P1 é‡è¦åŠŸèƒ½
- [ ] æµç¨‹å®ä¾‹è¯¦æƒ…æ˜¾ç¤ºå®Œæ•´ä¿¡æ¯ï¼ˆåŸºæœ¬ä¿¡æ¯ã€æµç¨‹å›¾ã€å†å²è®°å½•ï¼‰
- [ ] æµç¨‹å›¾æ­£ç¡®é«˜äº®å½“å‰èŠ‚ç‚¹
- [ ] UserTask å¯ä»¥é…ç½®ç®€å•è¡¨å•ï¼ˆæ–‡æœ¬ã€æ•°å­—ã€æ—¥æœŸã€ä¸‹æ‹‰ï¼‰
- [ ] ä»»åŠ¡è¯¦æƒ…é¡µåŠ¨æ€æ¸²æŸ“é…ç½®çš„è¡¨å•
- [ ] æµç¨‹å˜é‡åœ¨å¯åŠ¨å’Œä»»åŠ¡å®Œæˆæ—¶æ­£ç¡®æ›´æ–°

---

## å…«ã€åç»­ä¼˜åŒ–æ–¹å‘

1. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - æµç¨‹å®ä¾‹åˆ—è¡¨åˆ†é¡µåŠ è½½
   - å¾…åŠä»»åŠ¡æ•°é‡ç»Ÿè®¡ç¼“å­˜
   - æµç¨‹å›¾æ¸²æŸ“ä¼˜åŒ–ï¼ˆå¤§å‹æµç¨‹ï¼‰

2. **ç”¨æˆ·ä½“éªŒ**ï¼š
   - ä»»åŠ¡åˆ°æœŸæé†’ï¼ˆé‚®ä»¶ã€ç«™å†…ä¿¡ï¼‰
   - æµç¨‹è¿›åº¦ç™¾åˆ†æ¯”æ˜¾ç¤º
   - ç§»åŠ¨ç«¯é€‚é…

3. **åŠŸèƒ½æ‰©å±•**ï¼š
   - å¹¶è¡Œç½‘å…³ï¼ˆå¤šäººä¼šç­¾ï¼‰
   - å­æµç¨‹æ”¯æŒ
   - æµç¨‹æ¨¡æ¿å¸‚åœº

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.1  
**æœ€åæ›´æ–°**ï¼š2025-12-29  
**çŠ¶æ€**ï¼šP0 æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆ
